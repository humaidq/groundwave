{{ template "head" . }}

<div class="welcome-container">
  <h2>Welcome to Groundwave</h2>
  <p class="welcome-subtitle">Your personal database</p>

  <div class="stats-compact">
    {{ if .IsAdmin }}
    <div class="stat-item">
      <span class="stat-item-label">Contacts</span>
      <span class="stat-item-value">{{ .TotalContacts }}</span>
    </div>
    <div class="stat-item">
      <span class="stat-item-label">Overdue</span>
      <span class="stat-item-value warning">{{ .OverdueCount }}</span>
    </div>
    <div class="stat-item">
      <span class="stat-item-label">QSOs</span>
      <span class="stat-item-value">{{ .QSOCount }}</span>
    </div>
    <div class="stat-item">
      <span class="stat-item-label">Inventory</span>
      <span class="stat-item-value">{{ .InventoryCount }}</span>
    </div>
    <div class="stat-item">
      <span class="stat-item-label">Notes</span>
      <span class="stat-item-value">{{ .NotesCount }}</span>
    </div>
    {{ else }}
    <div class="stat-item">
      <span class="stat-item-label">Inventory</span>
      <span class="stat-item-value">{{ .InventoryCount }}</span>
    </div>
    <div class="stat-item">
      <span class="stat-item-label">Shared Health</span>
      <span class="stat-item-value">{{ .HealthProfileCount }}</span>
    </div>
    {{ end }}
  </div>

  <div class="welcome-actions">
    {{ if .IsAdmin }}
      {{ if gt .OverdueCount 0 }}
      <a href="/overdue" class="btn">View Overdue Contacts ({{ .OverdueCount }})</a>
      {{ end }}
      <a href="/bulk-contact-log" class="btn">Bulk Contact Log</a>
      <a href="/whatsapp" class="btn{{ if eq .WhatsAppStatus "connected" }} btn-success{{ end }}">WhatsApp: {{ .WhatsAppStatus }}</a>
      <a href="/security" class="btn">Security</a>
    {{ else }}
      <a href="/inventory" class="btn">Inventory</a>
      <a href="/files" class="btn">Files</a>
      <a href="/health" class="btn">Health</a>
      <a href="/security" class="btn">Security</a>
    {{ end }}
    <form action="/logout" method="post" class="inline-form">
      <input type="hidden" name="_csrf" value="{{ .csrf_token }}" />
      <button type="submit" class="btn">Logout</button>
    </form>
  </div>

  {{ if and .IsAdmin .RecentQSOs }}
  <div class="recent-section">
    <h3>Recent QSOs</h3>
    <div class="list-card-list">
      {{ range .RecentQSOs }}
      <a href="/qsl/{{ .ID }}">
        <div class="list-card">
          <div class="list-card-title">{{ .Call }}</div>
          <div class="list-card-meta">
            {{ .FormatDate }} {{ .FormatTime }}
            {{ if .Mode }}• {{ .Mode }}{{ end }}
            {{ if .Band }}• {{ .Band }}{{ end }}
            {{ if .Country }}• {{ .Country }}{{ end }}
          </div>
        </div>
      </a>
      {{ end }}
    </div>
  </div>
  {{ end }}

  {{ if and .IsAdmin .RecentContacts }}
  <div class="recent-section">
    <h3>Recently Updated</h3>
    <div class="list-card-list">
      {{ range .RecentContacts }}
      <a href="/contact/{{ .ID }}">
        <div class="list-card">
          <div class="list-card-title">{{ .NameDisplay }}</div>
          {{ if .Organization }}
          <div class="list-card-meta">{{ .Organization }}</div>
          {{ end }}
        </div>
      </a>
      {{ end }}
    </div>
  </div>
  {{ end }}
</div>

{{ template "foot" . }}
